<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:jpa="http://www.springframework.org/schema/data/jpa"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xmlns:context="http://www.springframework.org/schema/context"
       xsi:schemaLocation="
         http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
         http://camel.apache.org/schema/spring http://camel.apache.org/schema/spring/camel-spring.xsd
         http://www.springframework.org/schema/data/jpa http://www.springframework.org/schema/data/jpa/spring-jpa.xsd
         http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd
	 http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd">
  
   <bean id="sensors" class="java.util.ArrayList">
          <constructor-arg>
          <list>
              <ref bean="sensor1" />
              <ref bean="sensor2" />
          </list>
          </constructor-arg>
   </bean>
   <bean id="listeners" class="java.util.ArrayList">
          <constructor-arg>
          <list>
              <ref bean="listener" />
          </list>
          </constructor-arg>
   </bean>
  <bean id="astrategy" class="ru.tusur.udo.sensors.AStrategy">
   	<property name="interval" value="3" />
   	<property name="min" value="0" />
   	<property name="max" value="100" />
  </bean>
  <bean id="dstrategy" class="ru.tusur.udo.sensors.DStrategy">
   		<property name="interval" value="10" />
  </bean>
  <bean id="listener" class="ru.tusur.udo.sensors.SensorListener">
  </bean>
  <bean id="sensor1" class="ru.tusur.udo.sensors.PseudoSensor">
   		<property name="id" value="Test Digital sensor1" />
   		<property name="type" value="0" />
   		<property name="emulationStrategy" ref="dstrategy" />
  </bean>
  <bean id="sensor2" class="ru.tusur.udo.sensors.PseudoSensor">
   		<property name="id" value="Test Analog sensor2" />
   		<property name="type" value="1" />
   		<property name="emulationStrategy" ref="astrategy" />
  </bean>
  
  
  <bean id="runtime" class="ru.tusur.udo.sensors.SensorEmulationRuntime">
  	<property name="pseudoSensors" ref="sensors" />
  	<property name="listeners" ref="listeners" />
    
  </bean>
  <import resource="routes.xml"/>
	  <bean id="activemq" class="org.apache.activemq.camel.component.ActiveMQComponent"> 
		<property name="brokerURL" value="http-connector://localhost:8080"/>
	</bean>
  <camelContext id="camel" xmlns="http://camel.apache.org/schema/spring" trace="false">
  		 <propertyPlaceholder id="properties" location="app.properties" />
        <routeContextRef ref="start-route-sensors"/>
  </camelContext>

</beans>